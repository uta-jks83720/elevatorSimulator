@startuml
[*] --> INIT : power_on()
INIT : on_entry
INIT : \tAll indicators on
INIT : \tOPEN_DOOR=T
INIT : \tTIMER=20
INIT: on_exit
INIT -->FLOOR2 : timer_expired()
 

FLOOR2 : on_entry
FLOOR2 : \tGO_UP=F
FLOOR2 : \tGO_DOWN=F
FLOOR2 : \tOPEN_DOOR=F
FLOOR2 : \tCLOSE_DOOR=F
FLOOR2 : \tCAB_POS_2=T
FLOOR2 : \tPOS_FLOOR_2=T
FLOOR2 : \tAll other indicators off
FLOOR2 : on_exit
FLOOR2 --> GOINGUPTO3 : CALL_FLOOR_3()
FLOOR2 --> GOINGUPTO4 : CALL_FLOOR_4()
FLOOR2 --> GOINGUPTO3 : REQ_FLOOR_3()
FLOOR2 --> GOINGUPTO4 : REQ_FLOOR_4()



FLOOR3 : on_entry
FLOOR3 : \tGO_UP=F
FLOOR3 : \tGO_DOWN=F
FLOOR3 : \tOPEN_DOOR=F
FLOOR3 : \tCLOSE_DOOR=F
FLOOR3 : \tCAB_POS_3=T
FLOOR3 : \tPOS_FLOOR_3=T
FLOOR3 : \tAll other indicators off
FLOOR3 : on_exit
FLOOR3 --> GOINGUPTO4 : CALL_FLOOR_4()
FLOOR3 --> GOINGDNTO2 : CAL_FLOOR_2()
FLOOR3 --> GOINGUPTO4 : REQ_FLOOR_4()
FLOOR3 --> GOINGDNTO2 : REQ_FLOOR_2()

 
FLOOR4 : on_entry
FLOOR4 : \tGO_UP=F
FLOOR4 : \tGO_DOWN=F
FLOOR4 : \tOPEN_DOOR=F
FLOOR4 : \tCLOSE_DOOR=F
FLOOR4 : \tCAB_POS_4=T
FLOOR4 : \tPOS_FLOOR_4=T
FLOOR4 : \tAll other indicators off
FLOOR4 : on_exit
FLOOR4 --> GOINGUPTO4 : CALL_FLOOR_4()
FLOOR4 --> GOINGDNTO2 : CAL_FLOOR_2()
FLOOR4 --> GOINGUPTO4 : REQ_FLOOR_4()
FLOOR4 --> GOINGDNTO2 : REQ_FLOOR_2()

GOINGUPTO3 : on_entry
GOINGUPTO3 :\tGO_UP=T
GOINGUPTO3 :\tGO_DOWN=F
GOINGUPTO3 :\tOPEN_DOOR=F
GOINGUPTO3 :\tCLOSE_DOOR=F
GOINGUPTO3 :\tREQ_FLOOR_ACCEPTED_2=T
GOINGUPTO3 :\tCALL_ACCEPTED_FLOOR_2=T
GOINGUPTO3 :\tUPPTAGEN_FLOOR_3=T
GOINGUPTO3 :\tUPPTAGEN_FLOOR_4=T
GOINGUPTO3 : on_exit
GOINGUPTO3 -->FLOOR3 : CAB_POSITION_FLOOR_3()
 
GOINGUPTO4 : on_entry
GOINGUPTO4 :\tGO_UP=T
GOINGUPTO4 :\tGO_DOWN=F
GOINGUPTO4 :\tOPEN_DOOR=F
GOINGUPTO4 :\tCLOSE_DOOR=F
GOINGUPTO4 :\tREQ_FLOOR_ACCEPTED_4=T
GOINGUPTO4 :\tCALL_ACCEPTED_FLOOR_4=T
GOINGUPTO4 :\tUPPTAGEN_FLOOR_2=T
GOINGUPTO4 :\tUPPTAGEN_FLOOR_3=T
GOINGUPTO4 : on_exit
GOINGUPTO4 -->FLOOR4 : CAB_POSITION_FLOOR_4()

GOINGDNTO3 : on_entry
GOINGDNTO3 :\tGO_UP=F
GOINGDNTO3 :\tGO_DOWN=T
GOINGDNTO3 :\tOPEN_DOOR=F
GOINGDNTO3 :\tCLOSE_DOOR=F
GOINGDNTO3 :\tREQ_FLOOR_ACCEPTED_3=T
GOINGDNTO3 :\tCALL_ACCEPTED_FLOOR_3=T
GOINGDNTO3 :\tUPPTAGEN_FLOOR_2=T
GOINGDNTO3 :\tUPPTAGEN_FLOOR_4=T
GOINGDNTO3 : on_exit
GOINGDNTO3 -->FLOOR4 : CAB_POSITION_FLOOR_3()

GOINGDNTO2 : on_entry
GOINGDNTO2 :\tGO_UP=F
GOINGDNTO2 :\tGO_DOWN=T
GOINGDNTO2 :\tOPEN_DOOR=F
GOINGDNTO2 :\tCLOSE_DOOR=F
GOINGUPTO2 :\tREQ_FLOOR_ACCEPTED_2=T
GOINGUPTO2 :\tCALL_ACCEPTED_FLOOR_2=T
GOINGUPTO2 :\tUPPTAGEN_FLOOR_3=T
GOINGUPTO2 :\tUPPTAGEN_FLOOR_4=T
GOINGDNTO2 : on_exit
GOINGDNTO2 -->FLOOR4 : CAB_POSITION_FLOOR_2()

@enduml
